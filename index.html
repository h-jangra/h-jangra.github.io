<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>HJangra</title>
        <style>
            :root {
                --primary-color: #2563eb;
                --secondary-color: #10b981;
                --accent-color: #f59e0b;
                --bg-light: #f8fafc;
                --bg-dark: #ffffff;
                --text-dark: #1e293b;
                --border-color: #e2e8f0;
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            /* Base Body Styling */
            body {
                font-family: "Inter", "Segoe UI", sans-serif;
                font-size: 1.125em;
                line-height: 1.6;
                color: var(--text-dark);
                background: var(--bg-light);
            }

            /* Header & Navbar */
            header {
                background: linear-gradient(
                    135deg,
                    var(--primary-color),
                    var(--secondary-color)
                );
                padding: 1rem 2rem;
                position: sticky;
                top: 0;
                z-index: 1000;
            }

            .navbar {
                max-width: 1200px;
                margin: 0 auto;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            .logo {
                font-family: "JetBrains Mono", monospace;
                font-size: 1.75rem;
                font-weight: 800;
                color: #fff;
                text-decoration: none;
                transition: transform 0.2s ease;
            }

            .logo:hover {
                transform: scale(1.05);
            }

            /* Navigation links */
            .nav-links {
                display: flex;
                gap: 1rem;
            }

            .nav-links a {
                color: #fff;
                text-decoration: none;
                font-weight: 500;
                padding: 0.5rem;
                border-radius: 4px;
                transition: background-color 0.2s ease, transform 0.2s ease;
            }

            .nav-links a:hover {
                background-color: rgba(255, 255, 255, 0.15);
                transform: translateY(-2px);
            }

            /* Main content styling */
            main {
                max-width: 800px;
                margin: 2rem auto;
                background: var(--bg-dark);
                padding: 2rem;
                border-radius: 8px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }

            /* Headings */
            main h1,
            main h2,
            main h3 {
                color: var(--text-dark);
                margin-bottom: 1rem;
                font-weight: 700;
            }

            main h1 {
                font-size: 2.5rem;
                background: linear-gradient(
                    135deg,
                    var(--primary-color),
                    var(--secondary-color)
                );
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            main h2 {
                font-size: 2rem;
                color: var(--primary-color);
                border-bottom: 2px solid var(--border-color);
                padding-bottom: 0.5rem;
            }

            main p {
                margin-bottom: 1.5rem;
                color: var(--text-dark);
            }

            /* Code and Preformatted Text */
            main code {
                background: var(--bg-light);
                padding: 0.2rem 0.4rem;
                border-radius: 4px;
                font-family: "JetBrains Mono", monospace;
                border: 1px solid var(--border-color);
            }

            main pre {
                background: var(--bg-light);
                padding: 1rem;
                border-radius: 8px;
                border: 1px solid var(--border-color);
                overflow-x: auto;
                margin: 1.5rem 0;
            }

            /* Blockquotes */
            main blockquote {
                border-left: 4px solid var(--primary-color);
                padding: 1rem;
                margin: 1.5rem 0;
                background: var(--bg-light);
                border-radius: 4px;
                font-style: italic;
            }

            /* Blog Index List */
            #blog-index li {
                margin-bottom: 1rem;
                padding: 1rem;
                background: var(--bg-light);
                border: 1px solid var(--border-color);
                border-radius: 8px;
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }

            #blog-index li:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            #blog-index a {
                color: var(--text-dark);
                text-decoration: none;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }

            @media (max-width: 768px) {
                body {
                    font-size: 1em;
                }

                .navbar {
                    flex-wrap: wrap;
                }

                main {
                    margin: 1rem;
                    padding: 1.5rem;
                }
            }
        </style>
    </head>
    <body>
        <header>
            <nav class="navbar">
                <a href="#" class="logo">HJangra</a>
                <div id="blog-list" class="nav-links"></div>
            </nav>
        </header>
        <main id="content"></main>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
        <script>
            let blogs = [];
            const blogList = document.getElementById("blog-list");
            const content = document.getElementById("content");
            const maxVisible = 4;

            async function loadBlogList() {
                try {
                    content.innerHTML = '<div class="loading"></div>';
                    const res = await fetch("blogs.json");
                    blogs = await res.json();
                    buildNavbar();
                    if (location.hash) {
                        loadBlog(location.hash.substring(1));
                    } else {
                        showHome();
                    }
                } catch (error) {
                    content.innerHTML =
                        "<p>Error loading blog list. Please check if blogs/blogs.json exists.</p>";
                }
            }

            function buildNavbar() {
                blogList.innerHTML = "";

                blogs.slice(0, 2).forEach((b) => {
                    const link = document.createElement("a");
                    link.href = "#" + b.id;
                    link.innerText = b.title;
                    link.addEventListener("click", (e) => {
                        e.preventDefault();
                        loadBlog(b.id);
                        history.pushState({ id: b.id }, "", "#" + b.id);
                    });
                    blogList.appendChild(link);
                });
            }

            async function loadBlog(blogId) {
                const blog = blogs.find((b) => b.id === blogId);
                if (!blog) {
                    showHome();
                    return;
                }

                try {
                    content.innerHTML = '<div class="loading"></div>';
                    const res = await fetch(blog.file);
                    const text = await res.text();
                    content.innerHTML = marked.parse(text);
                } catch (err) {
                    content.innerHTML =
                        "<p>Error loading blog post. Please check if the file exists.</p>";
                }
            }

            function showHome() {
                content.innerHTML = "<h2></h2><ul id='blog-index'></ul>";
                const ul = document.getElementById("blog-index");

                blogs.forEach((b) => {
                    const li = document.createElement("li");
                    const a = document.createElement("a");
                    a.href = "#" + b.id;
                    a.textContent = b.title;
                    a.addEventListener("click", (e) => {
                        e.preventDefault();
                        loadBlog(b.id);
                        history.pushState({ id: b.id }, "", "#" + b.id);
                    });
                    li.appendChild(a);
                    ul.appendChild(li);
                });
            }

            document.querySelector(".logo").addEventListener("click", (e) => {
                e.preventDefault();
                showHome();
                history.pushState({}, "", "#");
            });

            window.addEventListener("popstate", (e) => {
                if (e.state && e.state.id) {
                    loadBlog(e.state.id);
                } else {
                    showHome();
                }
            });

            let resizeTimeout;
            window.addEventListener("resize", () => {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(() => {
                    buildNavbar();
                }, 250);
            });

            loadBlogList();
        </script>
    </body>
</html>
